Scripted_peace = {
	FINSOVPEACE = {
		ai_will_do = {
			factor = 1
		}
		visible = {
			original_tag = FIN
			has_war_with = SOV
		}
		available = {
			controls_state = 213
			controls_state = 215
			controls_state = 216
		}
		complete_effect = {
			country_event = {
				id = scripted_peace.1
			}
		}
	}
	SPRPORPEACE = {
		ai_will_do = {
			factor = 1
		}
		visible = {
			original_tag = SPR
			has_war_with = POR
		}
		available = {
			POR = {
				surrender_progress > 0.5
			}
		}
		complete_effect = {
			country_event = {
				id = scripted_peace.4
			}
		}
	}
	GERCZEPEACE = {
		ai_will_do = {
			factor = 1
		}
		visible = {
			original_tag = GER
			has_war_with = CZE
		}
		available = {
			CZE = {
				surrender_progress > 0.5
			}
		}
		complete_effect = {
			country_event = {
				id = scripted_peace.2
			}
		}
	}
	GERCZEPEACE = {
		ai_will_do = {
			factor = 1
		}

		visible = {
			original_tag = GER
			has_war_with = CZE
		}
		available = {
			CZE = {
				surrender_progress > 0.5
			}
		}
		complete_effect = {
			country_event = {
				id = scripted_peace.2
			}
		}
	}
	POLTWOSIDES = {
		ai_will_do = {
			factor = 1
		}

		visible = {
			original_tag = POL
			
			has_war_with = GER
			GER = {
				has_government = fascism
			}
		}
		available = {
			POL = {
				surrender_progress > 0.7
			}
			OR = {
				has_war_with = SOV
				has_global_flag = sov_yes_pact
			}
		complete_effect = {
			white_peace = {
				tag = GER
				message = POLPARTITION
			}
			GER = {
				transfer_state = 86
				transfer_state = 807
				transfer_state = 85
				transfer_state = 762
				transfer_state = 87
				transfer_state = 98
				puppet = POL
			}
			SOV = {
				transfer_state = 89
				transfer_state = 91
				transfer_state = 93
				transfer_state = 94
				transfer_state = 95
				transfer_state = 96
				transfer_state = 784
				transfer_state = 97
			}
			POL = {
				set_cosmetic_tag = GGN
				set_capital = {
					state = 88
				}
			}
		}
	}
}	
	SPLITYUG = {
		ai_will_do = {
			factor = 1
		}

		visible = {
			original_tag = GER	
			has_war_with = YUG
		}
		available = {
			YUG = {
				surrender_progress > 0.75
			}
		}
		complete_effect = {
			country_event = {
				id = scripted_peace.8
			}
		}
	}
	KILLENG = {
		ai_will_do = {
			factor = 1
		}

		visible = {
			original_tag = GER	
			has_war_with = ENG
		}
		available = {
			NOT = {
				has_global_flag = AXIS_WIN_WWII
			ENG = {
				surrender_progress > 0.75
			}
		}
		complete_effect = {
			ENG = {
				release = SCO
				release = WLS
				release = KEN
				release = CAN
				release = BOT
				release = NIR
				release = ZIM
				release = ZAM
				release = MLW
				release = NGA
				release = GHA
				release = SIE
				release = GAM
				release = UGA
				release = TZN
				release = SUD
				release = EGY
				release = SRL
				release = MLD
				annex_country = {
					target = YEM
					transfer_troops = no
				}
				release = YEM
				release = UAE
				release = QAT
				release = KUW
				release = GYA
				release = JAM
				release = BAH
				release = BAS
				release = BLZ
			}
			IRE = {
				annex_country = {
					target = NIR
					transfer_troops = yes
				}
			}
			GER = {
				white_peace = {
					tag = ENG
					message = ALLIESSURRENDER
				}
				puppet = VIC
				transfer_state = 28
				transfer_state = 8
				transfer_state = 773
				transfer_state = 774
				transfer_state = 660
				transfer_state = 772
				transfer_state = 539
				annex_country = {
					target = TZN
				}
				annex_country = {
					target = UGA
				}
				annex_country =  {
					target = SAF
				}
				annex_country = {
					target = KEN
				}
				release_puppet = SAF
				transfer_state = 541
				set_global_flag = AXIS_WIN_WWII
			}
			VIC = {
				annex_country = {
					target = FRA
				}
			}
			SAF = {
				set_cosmetic_tag = RKSAF
			}
			ITA = {
				annex_country = {
					target = EGY
				}
				annex_country = {
					target =  SUD
				}
				transfer_state = 269
				transfer_state = 268
		}
	}
}